(function(){"use strict";function s(e,t,i,n,f,d,g,v){var o=typeof e=="function"?e.options:e;return t&&(o.render=t,o.staticRenderFns=i,o._compiled=!0),{exports:e,options:o}}const a={name:"Logger",props:{title:String,tailEndpoint:String,defaultLines:Number,filename:String},data(){return{content:"",lines:this.defaultLines||400,loading:!1,auto:!1,timer:null}},created(){this.fetchTail()},beforeDestroy(){this.timer&&clearInterval(this.timer)},methods:{notify(e,t){const i=this.$panel&&(this.$panel.notifications||this.$panel.notification);if(i&&typeof i[e]=="function"){i[e](t);return}console.warn("Notification:",e,t)},async fetchTail(){try{this.loading=!0;const e=await this.$api.get(this.tailEndpoint,{lines:this.lines});this.content=e&&e.content?e.content:""}catch(e){this.notify("error",e.message||"Failed to load log file")}finally{this.loading=!1}},toggleAuto(){this.auto=!this.auto,this.auto?this.timer=setInterval(this.fetchTail,5e3):this.timer&&(clearInterval(this.timer),this.timer=null)},async copy(){if(!this.content){this.notify("error","Nothing to copy");return}try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(this.content);else if(this.$panel&&typeof this.$panel.copy=="function")await this.$panel.copy(this.content);else if(typeof this.$copy=="function")await this.$copy(this.content);else{const e=document.createElement("textarea");e.value=this.content,e.setAttribute("readonly",""),e.style.position="fixed",e.style.top="-9999px",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}this.notify("success","Log copied")}catch(e){this.notify("error",(e==null?void 0:e.message)||"Copy failed")}}}};var r=function(){var t=this,i=t._self._c;return i("k-panel-inside",[i("k-view",{staticClass:"k-logger"},[i("k-header",{staticClass:"k-site-view-header"},[t._v(" Log Viewer "),i("k-button-group",{attrs:{slot:"buttons"},slot:"buttons"},[i("k-button",{staticStyle:{"margin-left":".5rem"},attrs:{icon:"copy",size:"xs",variant:"filled",theme:"blue-icon",disabled:t.loading||!t.content},on:{click:t.copy}},[t._v("Copy")]),i("k-button",{attrs:{icon:"refresh",size:"xs",variant:"filled",disabled:t.loading,responsive:"true"},on:{click:t.fetchTail}},[t._v("Refresh")]),i("k-button",{attrs:{icon:t.auto?"refresh-stop":"refresh-auto",size:"xs",variant:"filled",theme:t.auto?"red-icon":"green-icon",responsive:"true"},on:{click:t.toggleAuto}},[t._v(t._s(t.auto?"Stop":"Auto-Refresh"))])],1)],1),i("k-section",{staticStyle:{"margin-bottom":"1rem"},attrs:{label:"Log"}},[i("k-button-group",{attrs:{slot:"options"},slot:"options"},[i("k-number-field",{attrs:{value:t.lines,min:10,max:2e3,after:"Lines",width:"1/3"},on:{input:n=>t.lines=Number(n)}}),i("k-button",{attrs:{icon:"check",size:"xs",variant:"filled",theme:"green-icon",disabled:t.loading},on:{click:t.fetchTail}},[t._v("Apply")])],1)],1),i("k-box",{attrs:{theme:"passive"}},[i("div",{staticStyle:{"font-family":"var(--font-mono)","font-size":"var(--text-md)","line-height":"var(--height-md)","max-height":"calc(100vh - 360px)",overflow:"auto","white-space":"pre",width:"100%"}},[t.loading?[t._v("Loading...")]:t.content?[t._v(t._s(t.content))]:[t._v("No log content")]],2)])],1)],1)},l=[],c=s(a,r,l);const h=c.exports,p={logger:'<svg id="a" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21,23H3c-1.1,0-2-.9-2-2V3c0-1.1.9-2,2-2h18c1.1,0,2,.9,2,2v18c0,1.1-.9,2-2,2ZM17.53,17.45c-1.53.91-3.54.7-4.86-.62-1.56-1.56-1.56-4.09,0-5.66,1.56-1.56,4.09-1.56,5.66,0,1.32,1.32,1.52,3.33.62,4.86l2.21,2.21-1.41,1.41-2.21-2.21ZM16.91,15.41c.78-.78.78-2.05,0-2.83-.78-.78-2.05-.78-2.83,0-.78.78-.78,2.05,0,2.83.78.78,2.05.78,2.83,0ZM19,5H5v2h14v-2ZM10,11h-5v2h5v-2ZM10,17h-5v2h5v-2Z" style="fill-rule:evenodd;"/></svg>',log:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 22H5C3.34315 22 2 20.6569 2 19V3C2 2.44772 2.44772 2 3 2H17C17.5523 2 18 2.44772 18 3V15H22V19C22 20.6569 20.6569 22 19 22ZM18 17V19C18 19.5523 18.4477 20 19 20C19.5523 20 20 19.5523 20 19V17H18ZM16 20V4H4V19C4 19.5523 4.44772 20 5 20H16ZM6 7H14V9H6V7ZM6 11H14V13H6V11ZM6 15H11V17H6V15Z"></path></svg>',"refresh-auto":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM10.6219 8.41459L15.5008 11.6672C15.6846 11.7897 15.7343 12.0381 15.6117 12.2219C15.5824 12.2658 15.5447 12.3035 15.5008 12.3328L10.6219 15.5854C10.4381 15.708 10.1897 15.6583 10.0672 15.4745C10.0234 15.4088 10 15.3316 10 15.2526V8.74741C10 8.52649 10.1791 8.34741 10.4 8.34741C10.479 8.34741 10.5562 8.37078 10.6219 8.41459Z"></path></svg>',"refresh-stop":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM9 9H15V15H9V9Z"></path></svg>'};panel.plugin("scottboms/logger",{icons:p,components:{"k-logger-view":h}})})();
